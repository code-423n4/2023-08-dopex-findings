# Report

## Non-critical Issues


| |Issue|Instances|
|-|:-|:-:|
| [N-01](#N-01) | Adding a `return` statement when the function defines a named return variable, is redundant | 8 | 
| [N-02](#N-02) | No need for `== true` or `== false` checks | 1 | 
| [N-03](#N-03) | `constant` variable names should use capital letters and underscore | 3 | 
| [N-04](#N-04) | Do not calculate constants | 11 | 
| [N-05](#N-05) | Empty Function Body - Consider commenting why | 1 | 
| [N-06](#N-06) | Empty `bytes` check is missing | 4 | 
| [N-07](#N-07) | Function definition modifier order does not follow Solidity style guide | 3 | 
| [N-08](#N-08) | Hardcoded `address` should be avoided | 3 | 
| [N-09](#N-09) | Inconsistent spacing in comments | 5 | 
| [N-10](#N-10) | Don't initialize `uint`s and `int`s with zero | 10 | 
| [N-11](#N-11) | State variable declaration should include NatSpec documentation | 17 | 
| [N-12](#N-12) | Contracts are not using their OZ Upgradeable counterparts | 9 | 
| [N-13](#N-13) | Two or more functions contain the same code | 34 | 
| [N-14](#N-14) | Unused contract variables | 3 | 
| [N-15](#N-15) | Unused named `return` | 7 | 
| [N-16](#N-16) | Unused parameter | 1 | 
| [N-17](#N-17) | Use `delete` instead of assigning values to `false` | 1 | 
| [N-18](#N-18) | Use named function calls | 2 | 
| [N-19](#N-19) | Use a single file for system wide constants | 14 | 
| [N-20](#N-20) | `uint` variables should have the bit size defined explicitly | 1 | 
| [N-21](#N-21) | Whitespace in Expressions | 11 |

Total: 1,241 instances over 78 issues.

## Non-critical Issues

### <a name="N-01"></a>[N-01] Adding a `return` statement when the function defines a named return variable, is redundant
Once the return variable has been assigned (or has its default value), there is no need to explicitly return it at the end of the function, since it's returned automatically

*Instances (8)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/core/RdpxV2Core.sol

884:     return (receiptTokenAmount, delegateReceiptTokenAmounts);

1217:     return

1228:     return

1273:     return (

```

[884](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L884), [1217](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1217), [1228](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1228), [1273](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1273)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

568:     return genesis + (latestFundingPaymentPointer * fundingDuration);

579:       return _strike;

```

[568](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L568), [579](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L579)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

222:     return

282:     return

```

[222](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L222), [282](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L282)

</details>

### <a name="N-02"></a>[N-02] No need for `== true` or `== false` checks
There is no need to verify that `== true` or `== false` when the variable checked upon is a boolean as well.

*Instances (1)*:

```solidity
File: contracts/core/RdpxV2Core.sol

798:     _validate(fundingPaidFor[pointer] == false, 16);

```

[798](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L798)

### <a name="N-03"></a>[N-03] `constant` variable names should use capital letters and underscore
For immutable variables in Solidity, the convention is to use CAPS_CASE or UPPER_CASE_WITH_UNDERSCORES.

*Instances (3)*:

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

34:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[34](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L34)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

48:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[48](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L48)

```solidity
File: contracts/reLP/ReLPContract.sol

70:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[70](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L70)

### <a name="N-04"></a>[N-04] Do not calculate constants
Due to how constant variables are implemented (replacements at compile-time), an expression assigned to a constant variable is recomputed each time that the variable is used, which wastes some gas.

*Instances (11)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/core/RdpxV2Bond.sol

22:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

```

[22](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L22)

```solidity
File: contracts/core/RdpxV2Core.sol

88:   uint256 public constant RDPX_RATIO_PERCENTAGE = 25 * DEFAULT_PRECISION;

91:   uint256 public constant ETH_RATIO_PERCENTAGE = 75 * DEFAULT_PRECISION;

```

[88](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L88), [91](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L91)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

31:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

34:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[31](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L31), [34](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L34)

```solidity
File: contracts/dpxETH/DpxEthToken.sol

19:   bytes32 public constant PAUSER_ROLE = keccak256("PAUSER_ROLE");

20:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

21:   bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```

[19](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L19), [20](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L20), [21](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L21)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

45:   bytes32 public constant MANAGER_ROLE = keccak256("MANAGER_ROLE");

48:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[45](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L45), [48](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L48)

```solidity
File: contracts/reLP/ReLPContract.sol

70:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[70](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L70)

</details>

### <a name="N-05"></a>[N-05] Empty Function Body - Consider commenting why

*Instances (1)*:

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

231:   function _beforeTokenTransfer(
232:         address from,
233:         address,
234:         uint256
235:       ) internal virtual {}

```

[231-235](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L231-L235)

### <a name="N-06"></a>[N-06] Empty `bytes` check is missing
When developing smart contracts in Solidity, it's crucial to validate the inputs of your functions. This includes ensuring that the bytes parameters are not empty, especially when they represent crucial data such as addresses, identifiers, or raw data that the contract needs to process.
 Missing empty bytes checks can lead to unexpected behaviour in your contract. For instance, certain operations might fail, produce incorrect results, or consume unnecessary gas when performed with empty bytes. Moreover, missing input validation can potentially expose your contract to malicious activity, including exploitation of unhandled edge cases.
 To mitigate these issues, always validate that bytes parameters are not empty when the logic of your contract requires it.

*Instances (4)*:

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

/// @audit _data
339:   function execute(
340:         address _to,
341:         uint256 _value,
342:         bytes calldata _data
343:       ) external onlyRole(DEFAULT_ADMIN_ROLE) returns (bool, bytes memory) {

```

[339-343](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L339-L343)

```solidity
File: contracts/core/RdpxV2Bond.sol

/// @audit interfaceId
57:   function supportsInterface(
58:        bytes4 interfaceId
59:      )
60:        public
61:        view
62:        override(ERC721, ERC721Enumerable, AccessControl)
63:        returns (bool)
64:      {

```

[57-64](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L57-L64)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

/// @audit interfaceId
174:   function supportsInterface(
175:         bytes4 interfaceId
176:       )
177:         public
178:         view
179:         override(ERC721, ERC721Enumerable, AccessControl)
180:         returns (bool)
181:       {

```

[174-181](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L174-L181)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

/// @audit interfaceId
645:   function supportsInterface(
646:         bytes4 interfaceId
647:       )
648:         public
649:         view
650:         override(ERC721, ERC721Enumerable, AccessControl)
651:         returns (bool)
652:       {

```

[645-652](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L645-L652)

### <a name="N-07"></a>[N-07] Function definition modifier order does not follow Solidity style guide
See [this](https://docs.soliditylang.org/en/v0.8.19/style-guide.html#function-declaration) section of the Solidity Style Guide

*Instances (3)*:

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

/// @audit  1. Mutability before Visibility
89:   function emergencyWithdraw(
90:        address[] calldata tokens,
91:        bool transferNative,
92:        address payable to,
93:        uint256 amount,
94:        uint256 gas
95:      ) external onlyRole(DEFAULT_ADMIN_ROLE) {

```

[89-95](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L89-L95)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

/// @audit  1. Mutability before Visibility
262:   function redeemPreview(
263:         uint256 shares
264:       ) public view returns (uint256, uint256) {

/// @audit  1. Mutability before Visibility
269:   function previewDeposit(uint256 assets) public view returns (uint256) {

```

[262-264](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L262-L264), [269](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L269)

### <a name="N-08"></a>[N-08] Hardcoded `address` should be avoided
It's better to declare the hardcoded addresses as immutable state variables, as this will facilitate deployment on other chains.

*Instances (3)*:

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

83:       0x1F98431c8aD98523631AE4a59f267346ea31F984

86:       0xC36442b4a4522E871399CD717aBDD847Ab11FE88

88:     univ3_router = ISwapRouter(0xE592427A0AEce92De3Edee1F18E0157C05861564);

```

[83](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L83), [86](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L86), [88](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L88)

### <a name="N-09"></a>[N-09] Inconsistent spacing in comments
Some lines use // x and some use //x. The instances below point out the usages that don't follow the majority, within each file

*Instances (5)*:

```solidity
File: contracts/amo/UniV2LiquidityAmo.sol

1: //SPDX-License-Identifier: UNLICENSED

```

[1](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L1)

```solidity
File: contracts/core/RdpxV2Core.sol

1: //SPDX-License-Identifier: UNLICENSED

```

[1](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

1: //SPDX-License-Identifier: UNLICENSED

```

[1](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L1)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

1: //SPDX-License-Identifier: UNLICENSED

```

[1](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L1)

```solidity
File: contracts/reLP/ReLPContract.sol

1: //SPDX-License-Identifier: UNLICENSED

```

[1](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L1)

### <a name="N-10"></a>[N-10] Don't initialize `uint`s and `int`s with zero

*Instances (10)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/amo/UniV2LiquidityAmo.sol

147:     for (uint256 i = 0; i < tokens.length; i++) {

```

[147](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L147)

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

120:     for (uint i = 0; i < positions_array.length; i++) {

```

[120](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L120)

```solidity
File: contracts/core/RdpxV2Core.sol

167:     for (uint256 i = 0; i < tokens.length; i++) {

775:     for (uint256 i = 0; i < optionIds.length; i++) {

836:     for (uint256 i = 0; i < _amounts.length; i++) {

```

[167](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L167), [775](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L775), [836](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L836)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

103:     for (uint256 i = 0; i < tokens.length; i++) {

```

[103](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L103)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

89:   uint256 public latestFundingPaymentPointer = 0;

225:     for (uint256 i = 0; i < tokens.length; i++) {

328:     for (uint256 i = 0; i < optionIds.length; i++) {

413:     for (uint256 i = 0; i < strikes.length; i++) {

```

[89](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L89), [225](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L225), [328](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L328), [413](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L413)

</details>

### <a name="N-11"></a>[N-11] State variable declaration should include NatSpec documentation
State variables should be commented to explain their purpose.

*Instances (17)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

35:   IUniswapV3Factory public univ3_factory;

36:   INonfungiblePositionManager public univ3_positions;

37:   ISwapRouter public univ3_router;

63:   Position[] public positions_array;

66:   mapping(uint256 => Position) public positions_mapping;

69:   address public rdpx;

72:   address public rdpxV2Core;

```

[35](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L35), [36](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L36), [37](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L37), [63](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L63), [66](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L66), [69](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L69), [72](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L72)

```solidity
File: contracts/core/RdpxV2Bond.sol

20:   Counters.Counter private _tokenIdCounter;

22:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

```

[20](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L20), [22](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L22)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

28:   Counters.Counter private _tokenIdCounter;

31:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

34:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

37:   mapping(uint256 => Bond) public bonds;

```

[28](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L28), [31](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L31), [34](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L34), [37](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L37)

```solidity
File: contracts/dpxETH/DpxEthToken.sol

19:   bytes32 public constant PAUSER_ROLE = keccak256("PAUSER_ROLE");

20:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

21:   bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```

[19](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L19), [20](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L20), [21](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L21)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

82:   mapping(uint256 => uint256) public fundingRates;

```

[82](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L82)

</details>

### <a name="N-12"></a>[N-12] Contracts are not using their OZ Upgradeable counterparts
The non-upgradeable standard version of OpenZeppelin’s library are inherited / used by the contracts. It would be safer to use the upgradeable versions of the library contracts to avoid unexpected behaviour.

Where applicable, use the contracts from `@openzeppelin/contracts-upgradeable` instead of `@openzeppelin/contracts`. See [this](https://github.com/OpenZeppelin/openzeppelin-contracts-upgradeable/tree/master/contracts) for list of available upgradeable contracts

*Instances (9)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/amo/UniV2LiquidityAmo.sol

22: contract UniV2LiquidityAMO is AccessControl {

```

[22](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L22)

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

28: contract UniV3LiquidityAMO is AccessControl, ERC721Holder {

```

[28](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L28)

```solidity
File: contracts/core/RdpxV2Bond.sol

11: contract RdpxV2Bond is

```

[11](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L11)

```solidity
File: contracts/core/RdpxV2Core.sol

33: contract RdpxV2Core is

```

[33](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L33)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

18: contract RdpxDecayingBonds is

```

[18](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L18)

```solidity
File: contracts/dpxETH/DpxEthToken.sol

12: contract DpxEthToken is

```

[12](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L12)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

28: contract PerpetualAtlanticVault is

```

[28](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L28)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

21: contract PerpetualAtlanticVaultLP is ERC20, IPerpetualAtlanticVaultLP {

```

[21](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L21)

```solidity
File: contracts/reLP/ReLPContract.sol

25: contract ReLPContract is AccessControl {

```

[25](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L25)

</details>

### <a name="N-13"></a>[N-13] Two or more functions contain the same code
In Solidity programming, duplicate code in multiple functions introduces potential security risks and maintainability issues. It magnifies the impact of any bugs or vulnerabilities, since developers must fix these in every location where the code is replicated. Overlooking any instance of replicated code could leave vulnerabilities intact. Furthermore, code duplication leads to contract bloating, diminishing the readability and manageability of the code. Future logic changes would need to be applied in every location where the code is replicated, increasing the complexity of updates. To resolve this, it is recommended to consolidate duplicate code into a single internal function, and replace the duplicate instances with calls to this new function. This approach streamlines the code, reducing the attack surface and making it easier to maintain and update.

*Instances (34)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/amo/UniV2LiquidityAmo.sol

74:   function setAddresses(
75:        address _tokenA,
76:        address _tokenB,
77:        address _pair,
78:        address _rdpxV2Core,
79:        address _rdpxOracle,
80:        address _ammFactory,
81:        address _ammRouter
82:      ) external onlyRole(DEFAULT_ADMIN_ROLE) {
83:        require(
84:          _tokenA != address(0) &&
85:            _tokenB != address(0) &&
86:            _pair != address(0) &&
87:            _rdpxV2Core != address(0) &&
88:            _rdpxOracle != address(0) &&
89:            _ammFactory != address(0) &&
90:            _ammRouter != address(0),
91:          "reLPContract: address cannot be 0"
92:        );
93:        addresses = Addresses({
94:          tokenA: _tokenA,
95:          tokenB: _tokenB,
96:          pair: _pair,
97:          rdpxV2Core: _rdpxV2Core,
98:          rdpxOracle: _rdpxOracle,
99:          ammFactory: _ammFactory,
100:          ammRouter: _ammRouter
101:        });
102:      }

109:   function setSlippageTolerance(
110:         uint256 _slippageTolerance
111:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
112:         require(
113:           _slippageTolerance > 0,
114:           "reLPContract: slippage tolerance must be greater than 0"
115:         );
116:         slippageTolerance = _slippageTolerance;
117:       }

126:   function approveContractToSpend(
127:         address _token,
128:         address _spender,
129:         uint256 _amount
130:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
131:         require(_token != address(0), "reLPContract: token cannot be 0");
132:         require(_spender != address(0), "reLPContract: spender cannot be 0");
133:         require(_amount > 0, "reLPContract: amount must be greater than 0");
134:         IERC20WithBurn(_token).approve(_spender, _amount);
135:       }

142:   function emergencyWithdraw(
143:         address[] calldata tokens
144:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
145:         IERC20WithBurn token;
146:     
147:         for (uint256 i = 0; i < tokens.length; i++) {
148:           token = IERC20WithBurn(tokens[i]);
149:           token.safeTransfer(msg.sender, token.balanceOf(address(this)));
150:         }
151:     
152:         emit LogEmergencyWithdraw(msg.sender, tokens);
153:       }

362:   function sync() external {
363:         lpTokenBalance = IERC20WithBurn(addresses.pair).balanceOf(address(this));
364:       }

381:   function getLpPrice() public view returns (uint256) {
382:         return IRdpxEthOracle(addresses.rdpxOracle).getLpPriceInEth();
383:       }

```

[74-102](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L74-L102), [109-117](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L109-L117), [126-135](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L126-L135), [142-153](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L142-L153), [362-364](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L362-L364), [381-383](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L381-L383)

```solidity
File: contracts/core/RdpxV2Bond.sol

29:   function pause() public onlyRole(DEFAULT_ADMIN_ROLE) {
30:        _pause();
31:      }

33:   function unpause() public onlyRole(DEFAULT_ADMIN_ROLE) {
34:        _unpause();
35:      }

45:   function _beforeTokenTransfer(
46:        address from,
47:        address to,
48:        uint256 tokenId,
49:        uint256 batchSize
50:      ) internal override(ERC721, ERC721Enumerable) {
51:        _whenNotPaused();
52:        super._beforeTokenTransfer(from, to, tokenId, batchSize);
53:      }

```

[29-31](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L29-L31), [33-35](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L33-L35), [45-53](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L45-L53)

```solidity
File: contracts/core/RdpxV2Core.sol

144:   function pause() external onlyRole(DEFAULT_ADMIN_ROLE) {
145:         _pause();
146:       }

152:   function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {
153:         _unpause();
154:       }

161:   function emergencyWithdraw(
162:         address[] calldata tokens
163:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
164:         _whenPaused();
165:         IERC20WithBurn token;
166:     
167:         for (uint256 i = 0; i < tokens.length; i++) {
168:           token = IERC20WithBurn(tokens[i]);
169:           token.safeTransfer(msg.sender, token.balanceOf(address(this)));
170:         }
171:     
172:         emit LogEmergencyWithdraw(msg.sender, tokens);
173:       }

403:   function approveContractToSpend(
404:         address _token,
405:         address _spender,
406:         uint256 _amount
407:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
408:         _validate(_token != address(0), 17);
409:         _validate(_spender != address(0), 17);
410:         _validate(_amount > 0, 17);
411:         IERC20WithBurn(_token).approve(_spender, _amount);
412:       }

419:   function addToContractWhitelist(
420:         address _addr
421:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
422:         _addToContractWhitelist(_addr);
423:       }

430:   function removeFromContractWhitelist(
431:         address _addr
432:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
433:         _removeFromContractWhitelist(_addr);
434:       }

455:   function setSlippageTolerance(
456:         uint256 _slippageTolerance
457:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
458:         _validate(_slippageTolerance > 0, 3);
459:         slippageTolerance = _slippageTolerance;
460:     
461:         emit LogSetSlippageTolerance(_slippageTolerance);
462:       }

995:   function sync() external {
996:         for (uint256 i = 1; i < reserveAsset.length; i++) {
997:           uint256 balance = IERC20WithBurn(reserveAsset[i].tokenAddress).balanceOf(
998:             address(this)
999:           );
1000:     
1001:           if (weth == reserveAsset[i].tokenAddress) {
1002:             balance = balance - totalWethDelegated;
1003:           }
1004:           reserveAsset[i].tokenBalance = balance;
1005:         }
1006:     
1007:         emit LogSync();
1008:       }

1206:   function getLpPrice() public view returns (uint256) {
1207:          return
1208:            IRdpxEthOracle(pricingOracleAddresses.rdpxPriceOracle).getLpPriceInEth();
1209:        }

```

[144-146](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L144-L146), [152-154](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L152-L154), [161-173](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L161-L173), [403-412](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L403-L412), [419-423](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L419-L423), [430-434](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L430-L434), [455-462](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L455-L462), [995-1008](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L995-L1008), [1206-1209](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1206-L1209)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

70:   function pause() external onlyRole(DEFAULT_ADMIN_ROLE) {
71:        _pause();
72:      }

76:   function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {
77:        _unpause();
78:      }

162:   function _beforeTokenTransfer(
163:         address from,
164:         address to,
165:         uint256 tokenId,
166:         uint256 batchSize
167:       ) internal override(ERC721, ERC721Enumerable) {
168:         _whenNotPaused();
169:         super._beforeTokenTransfer(from, to, tokenId, batchSize);
170:       }

```

[70-72](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L70-L72), [76-78](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L76-L78), [162-170](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L162-L170)

```solidity
File: contracts/dpxETH/DpxEthToken.sol

29:   function pause() public onlyRole(PAUSER_ROLE) {
30:        _pause();
31:      }

33:   function unpause() public onlyRole(PAUSER_ROLE) {
34:        _unpause();
35:      }

```

[29-31](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L29-L31), [33-35](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L33-L35)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

136:   function pause() external onlyRole(DEFAULT_ADMIN_ROLE) {
137:         _pause();
138:       }
139:     

144:   function unpause() external onlyRole(DEFAULT_ADMIN_ROLE) {
145:         _unpause();
146:       }
147:     

153:   function addToContractWhitelist(
154:         address _contract
155:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
156:         _addToContractWhitelist(_contract);
157:       }
158:     

164:   function removeFromContractWhitelist(
165:         address _contract
166:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
167:         _removeFromContractWhitelist(_contract);
168:       }
169:     

181:   function setAddresses(
182:         address _optionPricing,
183:         address _assetPriceOracle,
184:         address _volatilityOracle,
185:         address _feeDistributor,
186:         address _rdpx,
187:         address _perpetualAtlanticVaultLP,
188:         address _rdpxV2Core
189:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
190:         _validate(_optionPricing != address(0), 1);
191:         _validate(_assetPriceOracle != address(0), 1);
192:         _validate(_volatilityOracle != address(0), 1);
193:         _validate(_feeDistributor != address(0), 1);
194:         _validate(_rdpx != address(0), 1);
195:         _validate(_perpetualAtlanticVaultLP != address(0), 1);
196:         _validate(_rdpxV2Core != address(0), 1);
197:     
198:         addresses = Addresses({
199:           optionPricing: _optionPricing,
200:           assetPriceOracle: _assetPriceOracle,
201:           volatilityOracle: _volatilityOracle,
202:           feeDistributor: _feeDistributor,
203:           rdpx: _rdpx,
204:           perpetualAtlanticVaultLP: _perpetualAtlanticVaultLP,
205:           rdpxV2Core: _rdpxV2Core
206:         });
207:         collateralToken.safeApprove(
208:           addresses.perpetualAtlanticVaultLP,
209:           type(uint256).max
210:         );
211:         emit AddressesSet(addresses);
212:       }
213:     

219:   function emergencyWithdraw(
220:         address[] calldata tokens
221:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
222:         _whenPaused();
223:         IERC20WithBurn token;
224:     
225:         for (uint256 i = 0; i < tokens.length; i++) {
226:           token = IERC20WithBurn(tokens[i]);
227:           token.safeTransfer(msg.sender, token.balanceOf(address(this)));
228:         }
229:     
230:         emit EmergencyWithdraw(msg.sender, tokens);
231:       }
232:     

635:   function _beforeTokenTransfer(
636:         address from,
637:         address to,
638:         uint256 tokenId,
639:         uint256 batchSize
640:       ) internal override(ERC721, ERC721Enumerable) {
641:         _whenNotPaused();
642:         super._beforeTokenTransfer(from, to, tokenId, batchSize);
643:       }
644:     

```

[136-139](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L136-L139), [144-147](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L144-L147), [153-158](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L153-L158), [164-169](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L164-L169), [181-213](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L181-L213), [219-232](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L219-L232), [635-644](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L635-L644)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

240:   function activeCollateral() public view returns (uint256) {
241:         return _activeCollateral;
242:       }

245:   function totalCollateral() public view returns (uint256) {
246:         return _totalCollateral;
247:       }

250:   function rdpxCollateral() public view returns (uint256) {
251:         return _rdpxCollateral;
252:       }

```

[240-242](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L240-L242), [245-247](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L245-L247), [250-252](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L250-L252)

```solidity
File: contracts/reLP/ReLPContract.sol

186:   function setSlippageTolerance(
187:         uint256 _slippageTolerance
188:       ) external onlyRole(DEFAULT_ADMIN_ROLE) {
189:         require(
190:           _slippageTolerance > 0,
191:           "reLPContract: slippage tolerance must be greater than 0"
192:         );
193:         slippageTolerance = _slippageTolerance;
194:       }

```

[186-194](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L186-L194)

</details>
### <a name="N-14"></a>[N-14] Unused contract variables
Note that there may be cases where a variable appears to be used, but this is only because there are multiple definitions of the varible in different files. In such cases, the variable definition should be moved into a separate file. The instances below are the unused variables.

*Instances (3)*:

```solidity
File: contracts/amo/UniV2LiquidityAmo.sol

48:   uint256 public constant DEFAULT_PRECISION = 1e8;

```

[48](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L48)

```solidity
File: contracts/core/RdpxV2Core.sol

103:   uint256 public liquiditySlippageTolerance = 5e5; // 0.5%

```

[103](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L103)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

52:   string public underlyingSymbol;

```

[52](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L52)

### <a name="N-15"></a>[N-15] Unused named `return`
Declaring named returns, but not using them, is confusing to the reader. Consider either completely removing them (by declaring just the type without a name), or remove the return statement and do a variable assignment.
This would improve the readability of the code, and it may also help reduce regressions during future code refactors.

*Instances (7)*:

```solidity
File: contracts/core/RdpxV2Core.sol

1216:   function getDpxEthPrice() public view returns (uint256 dpxEthPrice) {

1227:   function getEthPrice() public view returns (uint256 ethPrice) {

1260:   function getDelegatePosition(
1261:          uint256 _delegateId
1262:        )
1263:          public
1264:          view
1265:          returns (
1266:            address delegate,
1267:            uint256 amount,
1268:            uint256 fee,
1269:            uint256 activeCollateral
1270:          )
1271:        {

```

[1216](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1216), [1227](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1227), [1260-1271](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L1260-L1271)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

563:   function nextFundingPaymentTimestamp()
564:         public
565:         view
566:         returns (uint256 timestamp)
567:       {

576:   function roundUp(uint256 _strike) public view returns (uint256 strike) {

```

[563-567](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L563-L567), [576](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L576)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

218:   function _convertToAssets(
219:         uint256 shares
220:       ) internal view virtual returns (uint256 assets, uint256 rdpxAmount) {

274:   function convertToShares(
275:         uint256 assets
276:       ) public view returns (uint256 shares) {

```

[218-220](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L218-L220), [274-276](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L274-L276)


### <a name="N-16"></a>[N-16] Unused parameter
possible for issue

*Instances (1)*:

```solidity
File: contracts/perp-vault/PerpetualAtlanticVaultLP.sol

/// @audit from not used
231:   function _beforeTokenTransfer(
232:         address from,
233:         address,
234:         uint256
235:       ) internal virtual {}

```

[231-235](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVaultLP.sol#L231-L235)


### <a name="N-17"></a>[N-17] Use `delete` instead of assigning values to `false`
The `delete` keyword more closely matches the semantics of what is being done, and draws more attention to the changing of state, which may lead to a more thorough audit of its associated logic.

*Instances (1)*:

```solidity
File: contracts/core/RdpxV2Core.sol

776:       optionsOwned[optionIds[i]] = false;

```

[776](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L776)

### <a name="N-18"></a>[N-18] Use named function calls
Code base has an extensive use of named function calls, but it somehow missed one instance where this would be appropriate.
It should use named function calls on function call, as such:

```solidity

library.exampleFunction{value: _data.amount.value}({
    _id: _data.id,
    _amount: _data.amount.value,
    _token: _data.token,
    _example: "",    _metadata: _data.metadata
});


```



*Instances (2)*:

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

344:     (bool success, bytes memory result) = _to.call{ value: _value }(_data);

```

[344](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L344)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

98:       (bool success, ) = to.call{ value: amount, gas: gas }("");

```

[98](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L98)

### <a name="N-19"></a>[N-19] Use a single file for system wide constants
Consider grouping all the system constants under a single file. This finding shows only the first constant for each file, for brevity.

*Instances (14)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/amo/UniV2LiquidityAmo.sol

48:   uint256 public constant DEFAULT_PRECISION = 1e8;

```

[48](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV2LiquidityAmo.sol#L48)

```solidity
File: contracts/core/RdpxV2Bond.sol

22:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

```

[22](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Bond.sol#L22)

```solidity
File: contracts/core/RdpxV2Core.sol

85:   uint256 public constant DEFAULT_PRECISION = 1e8;

88:   uint256 public constant RDPX_RATIO_PERCENTAGE = 25 * DEFAULT_PRECISION;

91:   uint256 public constant ETH_RATIO_PERCENTAGE = 75 * DEFAULT_PRECISION;

```

[85](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L85), [88](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L88), [91](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/core/RdpxV2Core.sol#L91)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

31:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

34:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[31](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L31), [34](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L34)

```solidity
File: contracts/dpxETH/DpxEthToken.sol

19:   bytes32 public constant PAUSER_ROLE = keccak256("PAUSER_ROLE");

20:   bytes32 public constant MINTER_ROLE = keccak256("MINTER_ROLE");

21:   bytes32 public constant BURNER_ROLE = keccak256("BURNER_ROLE");

```

[19](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L19), [20](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L20), [21](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/dpxETH/DpxEthToken.sol#L21)

```solidity
File: contracts/perp-vault/PerpetualAtlanticVault.sol

45:   bytes32 public constant MANAGER_ROLE = keccak256("MANAGER_ROLE");

48:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[45](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L45), [48](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/perp-vault/PerpetualAtlanticVault.sol#L48)

```solidity
File: contracts/reLP/ReLPContract.sol

67:   uint256 public constant DEFAULT_PRECISION = 1e8;

70:   bytes32 public constant RDPXV2CORE_ROLE = keccak256("RDPXV2CORE_ROLE");

```

[67](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L67), [70](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L70)

</details>

### <a name="N-20"></a>[N-20] `uint` variables should have the bit size defined explicitly
Instead of using `uint` to declare `uint256`, explicitly define `uint256` to ensure there is no confusion

*Instances (1)*:

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

120:     for (uint i = 0; i < positions_array.length; i++) {

```

[120](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L120)

### <a name="N-21"></a>[N-21] Whitespace in Expressions
See the [Whitespace in Expressions](https://docs.soliditylang.org/en/latest/style-guide.html#whitespace-in-expressions) section of the Solidity Style Guide

*Instances (11)*:
<details>
<summary>see instances</summary>


```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

/// @audit Whitespace inside parenthesis
105:     (uint128 liquidity, , , , ) = get_pool.positions(

/// @audit Whitespace before a comma
105:     (uint128 liquidity, , , , ) = get_pool.positions(

/// @audit Whitespace before a comma
105:     (uint128 liquidity, , , , ) = get_pool.positions(

/// @audit Whitespace inside parenthesis
193:     (uint256 tokenId, uint128 amountLiquidity, , ) = univ3_positions.mint(

/// @audit Whitespace before a comma
193:     (uint256 tokenId, uint128 amountLiquidity, , ) = univ3_positions.mint(

/// @audit Whitespace inside braces
344:     (bool success, bytes memory result) = _to.call{ value: _value }(_data);

/// @audit Whitespace inside braces
344:     (bool success, bytes memory result) = _to.call{ value: _value }(_data);

```

[105](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L105), [105](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L105), [105](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L105), [193](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L193), [193](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L193), [344](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L344), [344](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L344)

```solidity
File: contracts/decaying-bonds/RdpxDecayingBonds.sol

/// @audit Whitespace inside parenthesis
98:       (bool success, ) = to.call{ value: amount, gas: gas }("");

/// @audit Whitespace inside braces
98:       (bool success, ) = to.call{ value: amount, gas: gas }("");

/// @audit Whitespace inside braces
98:       (bool success, ) = to.call{ value: amount, gas: gas }("");

```

[98](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L98), [98](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L98), [98](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/decaying-bonds/RdpxDecayingBonds.sol#L98)

```solidity
File: contracts/reLP/ReLPContract.sol

/// @audit Whitespace before a comma
286:     (, , uint256 lp) = IUniswapV2Router(addresses.ammRouter).addLiquidity(

```

[286](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/reLP/ReLPContract.sol#L286)

</details>

NFT thefts have increased recently, so with the addition of hacked NFTs to the platform, NFTs can be converted into liquidity. To prevent this, I recommend adding the denylist function.

Marketplaces such as Opensea have a denylist feature that will not list NFTs that have been reported theft, NFT projects such as Manifold have denylist functions in their smart contracts.

Here is the project example; Manifold

[Manifold Contract](https://etherscan.io/address/0xe4e4003afe3765aca8149a82fc064c0b125b9e5a#code)



```solidity
modifier nonDenylistRequired(address extension) {
   require(!_denylistedExtensions.contains(extension), "Extension denylisted");
    _;
}

```


*Instances (1)*:

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

/// @audit Add to Denylist function and modifier.
1: // SPDX-License-Identifier: UNLICENSED

```

[1](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L1)


The current form of relative path import is not recommended for use because it can unpredictably pollute the namespace. Instead, the Solidity docs recommend specifying imported symbols explicitly. [https://docs.soliditylang.org/en/v0.8.15/layout-of-source-files.html#importing-other-source-files](https://docs.soliditylang.org/en/v0.8.15/layout-of-source-files.html#importing-other-source-files)

*Instances (6)*:

```solidity
File: contracts/amo/UniV3LiquidityAmo.sol

12: import "../uniswap_V3/IUniswapV3Factory.sol";

13: import "../uniswap_V3/libraries/TickMath.sol";

14: import "../uniswap_V3/libraries/LiquidityAmounts.sol";

15: import "../uniswap_V3/periphery/interfaces/INonfungiblePositionManager.sol";

16: import "../uniswap_V3/IUniswapV3Pool.sol";

17: import "../uniswap_V3/ISwapRouter.sol";

```

[12](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L12), [13](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L13), [14](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L14), [15](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L15), [16](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L16), [17](https://github.com/code-423n4/2023-08-dopex/blob/main/contracts/amo/UniV3LiquidityAmo.sol#L17)